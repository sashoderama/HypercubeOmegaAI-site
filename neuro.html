<!DOCTYPE html>
<html lang="en" data-theme="deep">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, viewport-fit=cover" />
  <meta name="theme-color" content="#0e1117" />
  <meta name="description" content="AuroraGenesis-OMEGA: Advanced AI System for cybersecurity, ethical intelligence, autonomous strategy generation, and forensic analysis." />
  <meta name="keywords" content="AI, cybersecurity, ethical AI, forensic analysis, neural interface" />
  <meta name="author" content="xAI" />
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self' 'unsafe-inline' 'unsafe-eval';
    style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://fonts.gstatic.com;
    img-src 'self' data: https://images.unsplash.com;
    font-src 'self' https://fonts.gstatic.com;
    connect-src 'self' wss://* https://api-inference.huggingface.co;
    worker-src 'self';
  " />
  <title>AuroraGenesis-OMEGA</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" />
  <style>
    :root {
      --bg-main: #0e1117;
      --bg-panel: #161b22;
      --text-main: #c9d1d9;
      --text-muted: #8b949e;
      --border: #30363d;
      --accent: #2f81f7;
      --radius: 12px;
      --transition: all 0.3s ease;
      --vh: 1vh;
      --blur: blur(18px);
      --shadow-glow: 0 0 20px rgba(47, 129, 247, 0.25);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Inter', sans-serif;
    }

    html, body {
      height: 100%;
      width: 100%;
      overflow: hidden;
      background: var(--bg-main);
      color: var(--text-main);
    }

    body.loaded {
      overflow: auto;
    }

    .stars-overlay, .nebula-glow {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      z-index: -1;
    }

    .stars-overlay {
      background: transparent;
      animation: twinkle 5s ease-in-out infinite;
    }

    .nebula-glow {
      background: radial-gradient(circle at 50% 50%, rgba(47,129,247,0.1), transparent 70%);
      animation: pulse 12s infinite;
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.6; filter: brightness(1); }
      50% { opacity: 0.3; filter: brightness(1.5); }
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 0.3; }
      50% { transform: scale(1.1); opacity: 0.5; }
    }

    #preloader {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: var(--bg-main);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      transition: opacity 0.6s ease;
    }

    #preloader.fade-out {
      opacity: 0;
      pointer-events: none;
    }

    .preloader-spinner {
      width: 80px;
      height: 80px;
      border: 6px solid var(--accent);
      border-top: 6px solid transparent;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .main-wrapper {
      display: flex;
      flex-direction: column;
      min-height: 100dvh;
      padding: 2rem;
      gap: 2rem;
      max-width: 1440px;
      margin: 0 auto;
    }

    .frost-container {
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 2rem;
      backdrop-filter: var(--blur);
      box-shadow: var(--shadow-glow);
      flex: 1;
      display: grid;
      grid-template-rows: 1fr auto;
      gap: 1.5rem;
      overflow: hidden;
    }

    .chat-log {
      background: var(--bg-panel);
      border-radius: var(--radius);
      padding: 1.5rem;
      overflow-y: auto;
      max-height: 60vh;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      scroll-behavior: smooth;
    }

    .chat-input {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 1rem;
    }

    .chat-input input {
      padding: 1rem;
      background: var(--bg-main);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      color: var(--text-main);
      font-size: 1rem;
    }

    .chat-input button {
      padding: 1rem 2rem;
      background: var(--accent);
      border: none;
      color: #fff;
      font-weight: 600;
      border-radius: var(--radius);
      cursor: pointer;
      transition: var(--transition);
    }

    .chat-input button:hover {
      background: #1f6feb;
    }

    .message {
      padding: 1rem;
      background: var(--bg-panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      transition: var(--transition);
    }

    .message.user {
      align-self: flex-end;
      background: rgba(47,129,247,0.08);
    }

    .message.ai {
      align-self: flex-start;
      background: rgba(255,255,255,0.02);
    }
  </style>
</head>
<body class="main-wrapper">
  <div id="preloader"><div class="preloader-spinner"></div></div>
  <div class="stars-overlay"></div>
  <div class="nebula-glow"></div>
  <main>
    <section class="frost-container">
      <div class="chat-log" id="chatLog" role="log" aria-live="polite"></div>
      <div class="chat-input">
        <input
          id="chat-input"
          type="text"
          placeholder="Ask AuroraGenesis anything..."
          aria-label="Chat input"
        />
        <button id="send-button">Send</button>
      </div>
    </section>
  </main>

  <!-- Aurora Assistant Floating Chat -->
  <div id="proChat-root" class="hidden" role="dialog" aria-modal="true" aria-label="Aurora Assistant">
    <div class="proChat-frame">
      <header class="proChat-header">
        <span>Aurora Assistant</span>
        <button id="proChat-close" aria-label="Close chat">âœ•</button>
      </header>
      <ul id="proChat-log" class="proChat-log" role="list" aria-live="polite"></ul>
      <form id="proChat-form" class="proChat-inputRow" autocomplete="off" aria-label="Send a message">
        <input id="proChat-input" type="text" placeholder="Type your messageâ€¦" aria-label="Assistant message input" />
        <button aria-label="Send message">â®ž</button>
      </form>
    </div>
  </div>

  <!-- Launcher Button -->
  <button id="proChat-launcher" class="proChat-launcher" aria-label="Toggle Aurora Assistant">
    ðŸ’¬
  </button>

  <!-- Scripts for interactivity -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      document.body.classList.add('loaded');
      document.getElementById('preloader').classList.add('fade-out');

      const chatLog = document.getElementById('chatLog');
      const input = document.getElementById('chat-input');
      const sendButton = document.getElementById('send-button');

      function appendMessage(content, sender) {
        const msg = document.createElement('div');
        msg.className = 'message ' + sender;
        msg.textContent = content;
        chatLog.appendChild(msg);
        chatLog.scrollTo({ top: chatLog.scrollHeight, behavior: 'smooth' });
      }

      function handleSend() {
        const value = input.value.trim();
        if (!value) return;
        appendMessage(value, 'user');
        input.value = '';
        setTimeout(() => {
          appendMessage("Aurora is thinking... [mock reply]", 'ai');
        }, 600);
      }

      sendButton.addEventListener('click', handleSend);
      input.addEventListener('keydown', e => {
        if (e.key === 'Enter') handleSend();
      });

      // Assistant toggle
      const launcher = document.getElementById('proChat-launcher');
      const root = document.getElementById('proChat-root');
      const close = document.getElementById('proChat-close');

      launcher.onclick = () => root.classList.toggle('hidden');
      close.onclick = () => root.classList.add('hidden');

      // Auto-hide assistant if inactive
      let lastPing = Date.now();
      setInterval(() => {
        if (!root.classList.contains('hidden') && Date.now() - lastPing > 30000) {
          root.classList.add('hidden');
        }
      }, 5000);
    });
  </script>
  <!-- Effects, TTS, Encrypt/Decrypt, Decompiler -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const encryptBtn = document.getElementById('encrypt-button');
      const decryptBtn = document.getElementById('decrypt-button');
      const decompileBtn = document.getElementById('decompile-button');

      encryptBtn?.addEventListener('click', () => {
        const input = document.getElementById('encrypt-input').value;
        const output = document.getElementById('encrypt-output');
        if (!input) return (output.textContent = 'No input.');
        output.textContent = `Encrypted: ${btoa(input)}`;
      });

      decryptBtn?.addEventListener('click', () => {
        const input = document.getElementById('decrypt-input').value;
        const output = document.getElementById('decrypt-output');
        try {
          output.textContent = `Decrypted: ${atob(input)}`;
        } catch {
          output.textContent = 'Invalid base64 input.';
        }
      });

      decompileBtn?.addEventListener('click', () => {
        const input = document.getElementById('decompile-input').value;
        const output = document.getElementById('decompile-output');
        output.textContent = `Simulated Decompiled Output of ${input.length} bytes. Function main() detected.`;
      });

      // Accordion toggle
      document.querySelectorAll('.accordion-header').forEach(header => {
        header.addEventListener('click', () => {
          const accordion = header.closest('.accordion');
          accordion.classList.toggle('active');
          const expanded = header.getAttribute('aria-expanded') === 'true';
          header.setAttribute('aria-expanded', !expanded);
        });
      });

      // Text-to-Speech
      const ttsChunks = [
        "AuroraGenesis-OMEGA is the future of secure AI cognition.",
        "It runs forensic modules, multi-agent mutation, and capsule memory.",
        "Powered by ethical inference and GPU acceleration."
      ];
      let ttsIndex = 0;
      let isSpeaking = false;
      let speech = new SpeechSynthesisUtterance();

      const speakNext = () => {
        if (ttsIndex >= ttsChunks.length) {
          isSpeaking = false;
          return;
        }
        speech.text = ttsChunks[ttsIndex++];
        speech.onend = speakNext;
        speechSynthesis.speak(speech);
      };

      document.getElementById('start-tts')?.addEventListener('click', () => {
        if (isSpeaking) return;
        isSpeaking = true;
        ttsIndex = 0;
        speakNext();
      });

      document.getElementById('pause-tts')?.addEventListener('click', () => {
        if (speechSynthesis.paused) {
          speechSynthesis.resume();
        } else {
          speechSynthesis.pause();
        }
      });

      // Responsive height fix
      const fixVH = () => {
        document.documentElement.style.setProperty('--vh', `${window.innerHeight * 0.01}px`);
      };
      fixVH();
      window.addEventListener('resize', fixVH);
    });
  </script>
</body>
</html>
